<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Yue Chang&#39;s TechRoad</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Yue Chang&#39;s TechRoad">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Yue Chang&#39;s TechRoad">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yue Chang">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Yue Chang&#39;s TechRoad" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Yue Chang&#39;s TechRoad</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JS-notes-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/28/JS-notes-1/" class="article-date">
  <time datetime="2020-04-28T04:25:27.000Z" itemprop="datePublished">2020-04-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/28/JS-notes-1/">JS notes 1</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="forEach-break-out-of-loop"><a href="#forEach-break-out-of-loop" class="headerlink" title="forEach() break out of loop"></a>forEach() break out of loop</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">array &#x3D; [1, 2, 3, 4];</span><br><span class="line">array.forEach(function (element) &#123;</span><br><span class="line">  console.log(element);</span><br><span class="line">  </span><br><span class="line">  if (element &#x3D;&#x3D;&#x3D; 2) </span><br><span class="line">    return;</span><br><span class="line">  </span><br><span class="line">&#125;);</span><br><span class="line">&#x2F;&#x2F; Output: 1 2 3 4</span><br></pre></td></tr></table></figure>

<p>What happens?</p>
<p>From the official MDN docs:<br>There is no way to stop or break a forEach() loop other than by throwing an exception. If you need such behavior, the forEach() method is the wrong tool.</p>
<p>Explanation:<br>forEach will execute the callback function to each iterable, it doesn’t care you exit once or not.<br>The same thing happens to <em>“continue”</em> and <em>“break”</em>, they do not work as well.</p>
<p>Solution:<br>Just use normal loop:<br>for (let i = …; i &lt; … ; i++){</p>
<p>}</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/28/JS-notes-1/" data-id="ck9jf9gnh000070r91zzvcq6q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-How-Javascript-Works-Asynchronous-JS" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/16/How-Javascript-Works-Asynchronous-JS/" class="article-date">
  <time datetime="2020-04-16T23:49:25.000Z" itemprop="datePublished">2020-04-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/16/How-Javascript-Works-Asynchronous-JS/">How Javascript Works: Asynchronous JS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Javascrpit-is-a-single-threaded-non-blocking-asynchronous-language"><a href="#Javascrpit-is-a-single-threaded-non-blocking-asynchronous-language" class="headerlink" title="Javascrpit is a single threaded, non-blocking, asynchronous language. "></a>Javascrpit is a single threaded, non-blocking, asynchronous language. </h2><p>Why we say it is Single threaded?</p>
<p>Consider the code below:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">num1,num2</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> sum = num1 + num2;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">output</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value)</span><br><span class="line">    &#125;</span><br><span class="line">    output(sum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">add(<span class="number">1</span>,<span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>It is gonna run on the stack that looks like:</p>
<img src="/2020/04/16/How-Javascript-Works-Asynchronous-JS/callstack.png" class="" title="This is how the memory looks like">
<p>The first called function will be pushed onto the bottom of the stack and the top function will be popped out and executed first. </p>
<p>Each function got executed in order, everything looks good, especially in the program tiny like this.</p>
<p>Single threaded means the JS engine only have one call stack and one memory heap( to store varibles ).</p>
<h2 id="The-problemt-is-blocking"><a href="#The-problemt-is-blocking" class="headerlink" title="The problemt is: blocking"></a>The problemt is: blocking</h2><p>If you run this in your browser:</p>
<figure class="highlight plain"><figcaption><span>lang = Javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alert(&quot;help&quot;)</span><br><span class="line">console.log(&quot;nice&quot;)</span><br></pre></td></tr></table></figure>

<p>“Nice” will never show up, if you don’t click on the alert.<br>That is because the call stack is occupied by the alert() and the console.log() is waiting for the completion of the previous function. </p>
<p>Also, a blocking example is: a user will not see the whole web page untile the JS engine finish rendering, it must be frustrated.</p>
<p>Then how we can solve it? The answer is using asynchronous function.</p>
<h2 id="Asynchronous"><a href="#Asynchronous" class="headerlink" title="Asynchronous"></a>Asynchronous</h2><ol>
<li>Synchronous vs Asynchronous</li>
</ol>
<p>Let’s first see how synchronous process works:</p>
<figure class="highlight plain"><figcaption><span>lang = Javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">console.log(&quot;hi&quot;)</span><br><span class="line">console.log(&quot;how can i help you?&quot;)</span><br><span class="line">function giveBread()&#123;....&#125;</span><br><span class="line">function giveBacon()&#123;....&#125;</span><br><span class="line">....</span><br><span class="line">console.log(&quot;bye&quot;)</span><br><span class="line">serveNextCustomer()</span><br></pre></td></tr></table></figure>

<p>This is a typical synchronous working flow. It works well and everything is predictable.</p>
<p>But imagine that we are in a restaurant, we want to order some food, maybe just a piece of bread. But the guy in front of us is ordering a lot, we have to wait. </p>
<p>The same issue happens in the synchronous working process: if a time-consuming function runs first, it may block user to interact with the appication while it’s loading.</p>
<ol start="2">
<li>A type of async: callback function</li>
</ol>
<p>Then let’s see a old-fashion way to accomplish async.</p>
<figure class="highlight plain"><figcaption><span>lang = Javascript</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(1)</span><br><span class="line">setTimeOut(callback() &#x3D;&gt;&#123;</span><br><span class="line">	console.log(2)</span><br><span class="line">&#125;,2000)</span><br><span class="line">console.log(3)</span><br></pre></td></tr></table></figure>

<p>It is gonna show:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p>But why that happens? Why it is not 1 2 3?</p>
<p>Here goes the Javascript Run-Time Environment</p>
<img src="/2020/04/16/How-Javascript-Works-Asynchronous-JS/workspace.png" class="" title="This is how the memory looks like">

<p>The timeout function belongs to the WebAPI.  It is not gonna run directly on the stack, it is on the background of the JS engine.<br>What the code does is, firstly console.log(1) runs. Then the setTimeOut(…) function is called and executed on the stack. The engine then notices this function is in Web APIs, so it saves both the timer and the callback() function in the browser’s thread and move out the setTimeOut(..) function from the stack. After the timer counting down and the time is up, the callback() function got pushed onto the Callback Queue.</p>
<p>The Event Loop kicks in, which is monitoring the callback queue all the time, to see when the stack is empty and push the first waiting callback onto the stack for executing.</p>
<p>In that way, the function is executed not in order. To sum up, the callback function is used to “do something after finish something rather than do it directly”.</p>
<p>Alright, that is it.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference "></a>Reference </h2><p><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing" target="_blank" rel="noopener">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing</a><br><a href="https://blog.sessionstack.com/how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-2f077c4438b5" target="_blank" rel="noopener">https://blog.sessionstack.com/how-javascript-works-event-loop-and-the-rise-of-async-programming-5-ways-to-better-coding-with-2f077c4438b5</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/16/How-Javascript-Works-Asynchronous-JS/" data-id="ck9jf3fg30002nkr94mqph9t4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Asychronous/" rel="tag">Asychronous</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Javascript-module-management" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/16/Javascript-module-management/" class="article-date">
  <time datetime="2020-04-16T23:46:29.000Z" itemprop="datePublished">2020-04-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/16/Javascript-module-management/">Javascript: module management</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/16/Javascript-module-management/" data-id="ck9jf3fg20001nkr9c5s9brxr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Asychronous/" rel="tag">Asychronous</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Asychronous/" style="font-size: 10px;">Asychronous</a> <a href="/tags/JS/" style="font-size: 10px;">JS</a> <a href="/tags/Javascript/" style="font-size: 20px;">Javascript</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/04/28/JS-notes-1/">JS notes 1</a>
          </li>
        
          <li>
            <a href="/2020/04/16/How-Javascript-Works-Asynchronous-JS/">How Javascript Works: Asynchronous JS</a>
          </li>
        
          <li>
            <a href="/2020/04/16/Javascript-module-management/">Javascript: module management</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Yue Chang<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>